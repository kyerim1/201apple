<!-- function2.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<!-- jquery-->
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

    <script>
        $(function(){

            $(".house").on("click", update );


        });

        // javascript - innerHTML , jquery - html()
        // innerHTML="<input>" , html("<input>")
        // innerHTML 과  html() 은  덮어쓰기 형태로 추가 한다.( 기존의 내용삭제)

        // a 라는 함수안에 변수의 값을  b라는 함수에서 사용하려면
        //  b함수의 매개변수를 통해 전달하거나,  
        //  전역변수를 통해 사용가능하게 한다.

        // on("이벤트명" , 이벤트발생시 실행할 함수 );
        // 이벤트 발생시 함수는 익명함수(function(){}) 이거나 함수명 만 작성

        function update(){
            var td = $(this);  // 클릭한 td 태그
            var td_text = td.text();  // 클릭한 td 태그안의 텍스트 

            td.removeClass("house"); //removeClass(삭제 할 클래스명 )
            td.addClass("change"); // addClass(추가 할 클래스명)

            td.html(`<input type=text value='${td_text}'> 
                     <button class='modify'>수정</button>`);
            $(".change>.modify").on("click", function(){
                save( $(".change") );
            });


        }

        function save( t ){ // 수정버튼 클릭이벤트 등록시 td를 t변수로 전달받음
            var text = t.children("input").val(); // input 태그에 작성된 텍스트
            t.text( text );
            console.log(t);
            t.on("click",update);
            
        }

    </script>


</head>
<body>
    
    <div id="wrap">
        <table>
            <thead>
                <tr>
                    <th>일</th>
                    <th>내역</th>
                    <th>지출</th>
                    <th>결제방법</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="house date" >12.1</td>
                    <td class="house detail">편의점(음료)</td>
                    <td class="house expense">2300</td>
                    <td class="house payment">카카오체크카드</td>
                </tr>
                <tr>
                    <td class="house date">12.4</td>
                    <td class="house detail">돈가스</td>
                    <td class="house expense">7000</td>
                    <td class="house payment">우리체크카드</td>
                </tr>
                <tr>
                    <td class="house date">12.5</td>
                    <td class="house detail">커피</td>
                    <td class="house expense">3000</td>
                    <td class="house payment">우리체크카드</td>
                </tr>
            </tbody>
        </table>
    </div>

</body>
</html>